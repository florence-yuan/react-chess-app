(this["webpackJsonpchess-app"]=this["webpackJsonpchess-app"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},,function(e,t,i){"use strict";i.r(t);var s=i(6),a=i.n(s),n=i(9),o=i.n(n),c=(i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(2)),r=i(5),p=i(4),d=i(3),l=i(7),u=i(1),h=i(0),b=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(u.a)(s)),s.handleDoubleClick=s.handleDoubleClick.bind(Object(u.a)(s)),s.checkMove=s.checkMove.bind(Object(u.a)(s)),s.handleUnSelect=s.handleUnSelect.bind(Object(u.a)(s)),s.handleSelect=s.handleSelect.bind(Object(u.a)(s)),s.handlePawnPromo=s.handlePawnPromo.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"encode",value:function(e,t){return 8*e+t}},{key:"inRange",value:function(e,t){return e>=0&&e<8&&t>=0&&t<8}},{key:"checkMove",value:function(e,t,i,s){return this.props.selected[3](e,t).includes(this.encode(i,s))}},{key:"handleUnSelect",value:function(e,t,i){var s="Un-selected ".concat(e," at (").concat(t,", ").concat(i,")");this.props.updateSelect(null),this.props.updatePossiblePos(null),this.props.updateMsg("complete",s)}},{key:"handleSelect",value:function(e,t,i,s,a,n){var o="Moved ".concat(e," to (").concat(s,", ").concat(a,")");this.props.updateSelect(null),this.props.updateMsg("complete",o);var c=this.props.updateBoard(t,i,s,a);return this.props.addHistory(n),this.props.updateTurn(),c}},{key:"handlePawnPromo",value:function(e,t,i,s){"pawn"===e&&(1===t&&7===i||2===t&&0===i)&&(document.body.classList.add("open-promo"),console.log("set pawn promotion",t),this.props.setPawnPromotion(t,i,s))}},{key:"handleClick",value:function(){if(!this.props.complete){var e=this.props.selected,t=this.props.side,i=this.props.turn,s=this.props.row,a=this.props.col,n=this.props.name;if(this.props.selected){var o=e[0],c=e[1],r=e[2],p=this.props.sideMap[[o,c]];if(s===o&&a===c)this.handleUnSelect(n,o,c);else{var d=this.props.board[[s,a]],l=this.props.sideMap[[s,a]];if(this.checkMove(o,c,s,a)){var u={isPawnPromotion:!1,pieceName:r,pieceSide:p,pieceOldRow:o,pieceOldCol:c,pieceNewRow:s,pieceNewCol:a,takeOverName:null,takeOverSide:null,takeOverRow:null,takeOverCol:null};l&&d&&(this.props.updatePieceCnt(l,d),u.takeOverName=d,u.takeOverSide=l,u.takeOverRow=s,u.takeOverCol=a),this.handleSelect(r,o,c,s,a,u)||this.handlePawnPromo(r,p,s,a),this.props.updatePossiblePos(null),this.props.updateTurnStart(p)}else this.props.updateMsg("warning","Wrong move")}}else if(t===i){if(!this.props.name)return;this.props.updateSelect([s,a,n,this.genPossibilities]),this.props.updateMsg("complete","Selected ".concat(n," at (").concat(s,", ").concat(a,")"));var h=this.genPossibilities(s,a);this.props.updatePossiblePos(h)}else this.props.updateMsg("warning","It's ".concat(1===i?"black":"white","'s turn"))}}},{key:"handleDoubleClick",value:function(){if(!this.props.complete){var e=this.props.side,t=this.props.turn,i=this.props.row,s=this.props.col,a=this.props.name;if(e===t){this.props.updateSelect([i,s,a,this.genPossibilities]);var n=this.genPossibilities(i,s);this.props.updatePossiblePos(n),this.props.updateMsg("complete","Selected ".concat(this.props.name," at (").concat(i,", ").concat(s,")"))}else this.props.updateMsg("warning","It's ".concat(this.props.turn,"'s turn"))}}},{key:"render",value:function(){var e=1===this.props.side?"black":"white";return Object(h.jsx)("div",{className:"figure ".concat(e," ").concat(this.props.name),onClick:this.handleClick,onDoubleClick:this.handleDoubleClick})}}]),i}(a.a.Component),m=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).genPossibilities=s.genPossibilities.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"genPossibilities",value:function(e,t){for(var i=[],s=this.props.sideMap[[e,t]],a=-1;a<=1;a++)for(var n=-1;n<=1;n++)if(0!==a||0!==n){var o=e+a,c=t+n;this.inRange(o,c)&&this.props.sideMap[[o,c]]!==s&&i.push(this.encode(o,c))}return i}}]),i}(b),j=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).genPossibilities=s.genPossibilities.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"genPossibilities",value:function(e,t){for(var i=this.props.sideMap[[e,t]],s=[],a=0,n=[[-1,0],[1,0],[0,-1],[0,1]];a<n.length;a++)for(var o=n[a],c=e,r=t;this.inRange(c,r);c+=o[0],r+=o[1])if(c!==e||r!==t){if(this.props.sideMap[[c,r]]===i)break;if(s.push(this.encode(c,r)),this.props.sideMap[[c,r]])break}for(var p=0,d=[[-1,-1],[-1,1],[1,-1],[1,1]];p<d.length;p++)for(var l=d[p],u=e,h=t;this.inRange(u,h);u+=l[0],h+=l[1])if(u!==e||h!==t){if(this.props.sideMap[[u,h]]===i)break;if(s.push(this.encode(u,h)),this.props.sideMap[[u,h]])break}return s}}]),i}(b),O=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).genPossibilities=s.genPossibilities.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"genPossibilities",value:function(e,t){for(var i=this.props.sideMap[[e,t]],s=[],a=0,n=[[-1,-1],[-1,1],[1,-1],[1,1]];a<n.length;a++)for(var o=n[a],c=e,r=t;this.inRange(c,r);c+=o[0],r+=o[1])if(c!==e||r!==t){if(this.props.sideMap[[c,r]]===i)break;if(s.push(this.encode(c,r)),this.props.sideMap[[c,r]])break}return s}}]),i}(b),f=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).genPossibilities=s.genPossibilities.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"genPossibilities",value:function(e,t){for(var i=this.props.sideMap[[e,t]],s=[],a=-2;a<=2;a++)if(0!==a)for(var n=3-Math.abs(a),o=void 0,c=-1;c<=1;c+=2)if(0!==(o=n*c)){var r=e+a,p=t+o;this.inRange(r,p)&&this.props.sideMap[[r,p]]!==i&&s.push(this.encode(r,p))}return s}}]),i}(b),v=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).genPossibilities=s.genPossibilities.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"genPossibilities",value:function(e,t){for(var i=[],s=this.props.sideMap[[e,t]],a=0,n=[[-1,0],[1,0],[0,-1],[0,1]];a<n.length;a++)for(var o=n[a],c=e,r=t;this.inRange(c,r);c+=o[0],r+=o[1])if(c!==e||r!==t){if(this.props.sideMap[[c,r]]===s)break;if(i.push(this.encode(c,r)),this.props.sideMap[[c,r]])break}return i}}]),i}(b),y=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).genPossibilities=s.genPossibilities.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"genPossibilities",value:function(e,t){var i=[],s=this.props.sideMap[[e,t]];if(1===s){var a=this.props.sideMap[[e+1,t]],n=this.props.sideMap[[e+2,t]];1===e?a===s||(2===a?i.push(this.encode(e+1,t)):(i.push(this.encode(e+1,t)),n!==s&&i.push(this.encode(e+2,t)))):a!==s&&i.push(this.encode(e+1,t))}else{var o=this.props.sideMap[[e-1,t]],c=this.props.sideMap[[e-2,t]];6===e?o===s||(1===o?i.push(this.encode(e-1,t)):(i.push(this.encode(e-1,t)),c!==s&&i.push(this.encode(e-2,t)))):o!==s&&i.push(this.encode(e-1,t))}for(var r=1===s?1:-1,p=-1;p<=1;p+=2){var d=e+r,l=t+p;this.inRange(d,l)&&this.props.sideMap[[d,l]]===3-s&&i.push(this.encode(d,l))}return i}}]),i}(b),k=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return i}(b),P=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){if(!this.props.name)return Object(h.jsx)(k,Object(l.a)({},this.props));var e=this.props.name;return"king"===e?Object(h.jsx)(m,Object(l.a)({},this.props)):"queen"===e?Object(h.jsx)(j,Object(l.a)({},this.props)):"bishop"===e?Object(h.jsx)(O,Object(l.a)({},this.props)):"knight"===e?Object(h.jsx)(f,Object(l.a)({},this.props)):"rook"===e?Object(h.jsx)(v,Object(l.a)({},this.props)):"pawn"===e?Object(h.jsx)(y,Object(l.a)({},this.props)):void console.error("Unknown piece")}}]),i}(a.a.Component);function x(e){return Object(h.jsx)("td",{className:"square ".concat(e.class),style:{backgroundColor:e.backgroundColor,boxShadow:e.boxShadow},children:e.children})}function g(e){for(var t=[],i=0;i<8;i++){for(var a=[],n=0;n<8;n++){var o="",c=-1,r=-1;e.selected&&(c=e.selected[0],r=e.selected[1]),e.selected&&c===i&&r===n?o="selected":c>-1&&r>-1&&e.showPos&&e.possiblePos&&e.possiblePos.includes(8*i+n)&&(o="indicate ".concat(1===e.sideMap[[c,r]]?"black":"white"," ").concat(e.selected[2]));var p=Object(h.jsx)(x,{class:o,children:Object(h.jsx)(P,{turn:e.turn,side:e.sideMap[[i,n]],name:e.board[[i,n]],row:i,col:n,board:e.board,sideMap:e.sideMap,selected:e.selected,complete:e.complete,completed:e.completed,updateTurn:e.updateTurn,updateSelect:e.updateSelect,updateBoard:e.updateBoard,updatePieceCnt:e.updatePieceCnt,updatePossiblePos:e.updatePossiblePos,updateMsg:e.updateMsg,updateTurnStart:e.updateTurnStart,setPawnPromotion:e.setPawnPromotion,addHistory:e.addHistory})},8*i+n);a.push(p)}t.push(Object(h.jsx)("tr",{className:"line",children:a},i))}var d=Object(s.useRef)(null);return Object(h.jsx)("table",{className:"board",ref:d,children:Object(h.jsx)("tbody",{children:t})})}function w(e){return Object(h.jsx)("button",{className:"newGame ripple-effect",onClick:e.newGame,style:{appearance:"none"},tabIndex:"0","aria-label":"reset game / new game",children:e.children})}function S(e){var t=e.gameComplete?"".concat(e.winner," wins"):"".concat(1===e.turn?"black":"white"," to move"),i=e.gameComplete?"new game":"reset game";return Object(h.jsxs)("span",{className:"turn-statement",children:[t,Object(h.jsx)(w,{newGame:e.newGame,children:i})]})}function C(e){var t=parseInt(e/3600),i=parseInt(e%3600/60),s=e%3600%60,a=t>0?t+":":"",n=i>=10?i:"0".concat(i),o=s>=10?s:"0".concat(s);return"".concat(a).concat(n,":").concat(o)}function M(e){var t="white"===e.side?"White":"Black";return Object(h.jsxs)("div",{className:"timePanel timePanel".concat(t),children:[Object(h.jsx)("div",{className:"timePanelColor"}),Object(h.jsx)("div",{className:"timeLeft",children:C(e.time)})]})}var T=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).state={whiteTime:e.whiteTime,blackTime:e.blackTime},s.props.isTimeLim&&setInterval((function(){return s.tick(s.props.turnStart)}),1e3),s.props.updateTimeLeft(1,s.props.whiteTime),s.props.updateTimeLeft(2,s.props.blackTime),s.tick=s.tick.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"tick",value:function(e){var t=this;e&&!this.props.gameComplete&&(1===e?this.setState((function(e){if(e.whiteTime>0)return{whiteTime:e.whiteTime-1};t.props.completed(1)})):this.setState((function(e){if(e.blackTime>0)return{blackTime:e.blackTime-1};t.props.completed(2)})))}},{key:"render",value:function(){return this.props.isTimeLim?Object(h.jsxs)("div",{className:"timer",children:[Object(h.jsx)(M,{side:"white",time:this.state.whiteTime,tick:this.tick,turnStart:this.props.turnStart}),Object(h.jsx)(M,{side:"black",time:this.state.blackTime,tick:this.tick,turnStart:this.props.turnStart})]}):null}}]),i}(a.a.Component),L=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return this.props.msg?Object(h.jsx)("div",{className:"msg ".concat(this.props.type),style:{opacity:1},children:Object(h.jsx)("span",{children:this.props.msg})}):Object(h.jsx)("div",{className:"msg",style:{opacity:0},children:Object(h.jsx)("span",{children:this.props.msg})})}}]),i}(a.a.Component),N=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){for(var e=[],t=0,i=0;i<2;i++)for(var s=0===i?"black":"white",a=this.props.pieceCnt[i],n=0,o=Object.keys(a);n<o.length;n++){var c=o[n],r=a[c]-this.props.initPieceCnt[c],p={color:r>=0?"var(--deep-sky-blue)":"gray",fontWeight:"bold"},d=Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:s}),Object(h.jsx)("td",{children:c}),Object(h.jsx)("td",{children:a[c]}),Object(h.jsx)("td",{style:p,children:r})]},2*i+t);e.push(d),t++}return Object(h.jsxs)("table",{className:"counter",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Side"}),Object(h.jsx)("th",{children:"Piece name"}),Object(h.jsx)("th",{children:"Count"}),Object(h.jsx)("th",{children:"Change"})]})}),Object(h.jsx)("tbody",{children:e})]})}}]),i}(a.a.Component);function I(e){return Object(h.jsxs)("div",{className:"promo-opt",onClick:function(){return e.pawnPromotion(e.name)},children:[Object(h.jsx)("input",{type:"radio",id:"promo ".concat(e.name),name:"promo type",value:"".concat(e.name)}),Object(h.jsx)("label",{htmlFor:"promo ".concat(e.name),children:e.name})]})}function D(e){return Object(h.jsxs)("div",{className:"pawn_promo",children:[Object(h.jsx)("span",{children:"Congratulations! Your pawn has reached the end!"}),Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"Promote your pawn to one of the following --"}),Object(h.jsxs)("div",{className:"promo_opts",children:[Object(h.jsx)(I,{name:"queen",pawnPromotion:e.pawnPromotion},0),Object(h.jsx)(I,{name:"knight",pawnPromotion:e.pawnPromotion},1),Object(h.jsx)(I,{name:"bishop",pawnPromotion:e.pawnPromotion},2),Object(h.jsx)(I,{name:"rook",pawnPromotion:e.pawnPromotion},3)]})]})}function F(e){return Object(h.jsx)("button",{className:"btn more ripple-effect",title:"piece count","aria-label":"open piece count",onClick:e.openPieceCnt,tabIndex:"0"})}var _=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).state={side:e.side,color:e.color,selected:null,turnStart:null,msg:null,msgType:null,possiblePos:[]},s.updateSelect=s.updateSelect.bind(Object(u.a)(s)),s.updateTurnStart=s.updateTurnStart.bind(Object(u.a)(s)),s.updatePossiblePos=s.updatePossiblePos.bind(Object(u.a)(s)),s.updateMsg=s.updateMsg.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"updateSelect",value:function(e){this.setState({selected:e})}},{key:"updateTurnStart",value:function(e){this.setState({turnStart:e})}},{key:"updatePossiblePos",value:function(e){this.setState({possiblePos:e})}},{key:"updateMsg",value:function(e,t){this.setState({msgType:e,msg:t})}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{gameComplete:this.props.complete,winner:this.props.winner,turn:this.props.turn,newGame:this.props.newGame}),Object(h.jsx)(T,{gameComplete:this.props.complete,isTimeLim:this.props.isTimeLim,whiteTime:this.props.whiteTime,blackTime:this.props.blackTime,turnStart:this.state.turnStart,completed:this.props.completed,updateTimeLeft:this.props.updateTimeLeft}),Object(h.jsx)(g,Object(l.a)(Object(l.a)({},this.state),{},{turn:this.props.turn,board:this.props.board,sideMap:this.props.sideMap,showPos:this.props.showPos,addHistory:this.props.addHistory,complete:this.props.complete,updateTurn:this.props.updateTurn,updateSelect:this.updateSelect,updateBoard:this.props.updateBoard,updatePieceCnt:this.props.updatePieceCnt,updatePossiblePos:this.updatePossiblePos,updateMsg:this.updateMsg,updateTurnStart:this.updateTurnStart,setPawnPromotion:this.props.setPawnPromotion})),Object(h.jsx)(L,{type:this.state.msgType,msg:this.state.msg}),Object(h.jsxs)("div",{className:"countCont",children:[Object(h.jsx)(F,{openPieceCnt:this.props.openPieceCnt}),Object(h.jsx)(N,{pieceCnt:this.props.pieceCnt,initPieceCnt:this.props.initPieceCnt})]}),Object(h.jsx)(D,{pawnPromotion:this.props.pawnPromotion})]})}}]),i}(a.a.Component);function R(e){return Object(h.jsxs)("label",{className:"switch",children:[Object(h.jsx)("input",{type:"checkbox",defaultChecked:!0,onChange:function(t){e.updateShowPos(t.target.checked)},tabIndex:"0"}),Object(h.jsx)("span",{className:"slider round"})]})}function B(e){return Object(h.jsxs)("label",{className:"switch",children:[Object(h.jsx)("input",{type:"checkbox",id:"input2",onChange:function(t){e.openPieceCnt()},tabIndex:"0"}),Object(h.jsx)("span",{className:"slider round"})]})}function G(e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"setting switchSet",children:[Object(h.jsx)("span",{children:"Indicate possible positions for piece movement"}),Object(h.jsx)(R,{updateShowPos:e.updateShowPos})]}),Object(h.jsxs)("div",{className:"setting switchSet",children:[Object(h.jsx)("span",{children:"Open table of piece count for black and white sides"}),Object(h.jsx)(B,{openPieceCnt:e.openPieceCnt})]})]})}function H(e){return JSON.parse(localStorage.getItem(e))}function q(e,t){localStorage.setItem(e,JSON.stringify(t))}function E(e){return e[0].toUpperCase()+e.slice(1)}function U(e){return Object(h.jsxs)("div",{className:"ripple-effect",children:[Object(h.jsx)("input",{type:"radio",id:"".concat(e.colorMode,"_mode"),name:"mode",onChange:e.updateMode,tabIndex:"0",defaultChecked:!0===e.default}),Object(h.jsxs)("label",{htmlFor:"".concat(e.colorMode,"_mode"),children:[E(e.colorMode)," Mode"]})]})}function A(e){var t="light"===e.colorMode,i="dark"===e.colorMode,s="system"===e.colorMode;return Object(h.jsxs)("div",{className:"setting modeSet",children:[Object(h.jsx)("span",{children:"Choose color mode"}),Object(h.jsx)(U,{colorMode:"light",updateMode:e.updateLightMode,default:t}),Object(h.jsx)(U,{colorMode:"dark",updateMode:e.updateDarkMode,default:i}),Object(h.jsx)(U,{colorMode:"system",updateMode:e.updateSystemMode,default:s})]})}function J(e){return Object(h.jsxs)("div",{className:"ripple-effect",children:[Object(h.jsx)("input",{type:"radio",id:"".concat(e.pieceStyle,"_style"),name:"style",onChange:e.updateStyle,tabIndex:"0",defaultChecked:!0===e.default}),Object(h.jsxs)("label",{htmlFor:"".concat(e.pieceStyle,"_style"),children:[E(e.pieceStyle)," Style Chess Pieces"]})]})}function W(e){var t="plain"===e.pieceStyle,i="fancy"===e.pieceStyle;return Object(h.jsxs)("div",{className:"setting pieceSet",children:[Object(h.jsx)("span",{children:"Choose chess piece style"}),Object(h.jsx)(J,{pieceStyle:"plain",updateStyle:e.updatePlainStyle,default:t}),Object(h.jsx)(J,{pieceStyle:"fancy",updateStyle:e.updateFancyStyle,default:i})]})}function Y(e){var t=[],i=function(i){var s=e.history[i];if(s.isPawnPromotion)return"continue";var a=-1;e.history&&(a=e.history[(parseInt(i)+1).toString(10)]);var n="Move ".concat(1===s.pieceSide?"black":"white"," ").concat(s.pieceName,"         from (").concat(s.pieceOldRow,", ").concat(s.pieceOldCol,")         to (").concat(s.pieceNewRow,", ").concat(s.pieceNewCol,")"),o="";s.takeOverName&&(o=" , take over ".concat(1===s.takeOverSide?"black":"white"," ").concat(s.takeOverName)),n+=o,a&&a.isPawnPromotion&&(n+=", promote ".concat(1===a.pieceSide?"black":"white","  pawn            at (").concat(a.row,", ").concat(a.col,") to ").concat(a.newPieceName)),t.push(Object(h.jsx)("li",{onClick:function(){return e.timeTravel(i)},className:"ripple-effect",children:n},i))};for(var s in e.history)i(s);return 0===t.length&&t.push(Object(h.jsx)("li",{style:{cursor:"text"},children:"History is empty"},0)),Object(h.jsx)("ol",{className:"history",children:t})}function z(){return Object(h.jsx)("span",{onClick:function(e){e.target.classList.contains("hist-open")?e.target.classList.remove("hist-open"):e.target.classList.add("hist-open")},tabIndex:"0",children:"Open history and time travel"})}function K(e){return Object(h.jsxs)("div",{className:"setting extSet",children:[Object(h.jsx)(z,{}),Object(h.jsxs)("div",{className:"hist-ext",children:[Object(h.jsx)("span",{className:"info",children:"Info: Click on entry to reverse step and newer (following) steps"}),Object(h.jsx)(Y,{history:e.history,timeTravel:e.timeTravel})]})]})}function Q(e){var t,i,s=(t=e.time,"hour"===(i=e.unit)?3600*t:"minute"===i?60*t:"second"===i?t:null);return Object(h.jsx)("input",{type:"radio",id:e.id,name:"time",tabIndex:"0",defaultChecked:e.isDefault,onChange:function(){"no_time_lim"===e.id?e.updateTimeLim(!1):e.updateTimeLim(s)}})}function V(e){return Object(h.jsxs)("div",{className:"ripple-effect",children:[Object(h.jsx)(Q,{id:"no_time_lim",isDefault:!1,updateTimeLim:e.updateIsTimeLim}),Object(h.jsx)("label",{htmlFor:"no_time_lim",children:"None"})]})}function X(e){return Object(h.jsxs)("div",{className:"ripple-effect",children:[Object(h.jsx)(Q,{id:"".concat(e.time,"_").concat(e.unit),time:e.time,unit:e.unit,isDefault:e.isDefault,updateTimeLim:e.updateTimeLim}),Object(h.jsxs)("label",{htmlFor:"".concat(e.time,"_").concat(e.unit),children:[e.time," ",e.unit,e.time>1?"s":""]})]})}var Z=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).state={value:""},s.handleChange=s.handleChange.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"handleChange",value:function(e){var t,i=e.target.value;this.state.value.length>1?(t=i.slice(i.length-2,i.length),this.setState({value:t}),this.props.updateInput(this.props.unit,t)):(t=1===i.length?"0"+i:i,this.setState({value:t}),this.props.updateInput(this.props.unit,t)),t.length<2&&(t="0"+i,this.setState({value:t}),this.props.updateInput(this.props.unit,t))}},{key:"render",value:function(){return Object(h.jsx)("input",{type:"number",min:this.props.minTime,max:this.props.maxTime,name:this.props.unit,id:this.props.unit,"aria-label":this.props.unit,placeholder:"00",value:this.state.value,onChange:this.handleChange})}}]),i}(a.a.Component),$=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).state={hrs:0,mins:0,secs:0},s.updateInput=s.updateInput.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"updateInput",value:function(e,t){t=parseInt(t),"hour"===e?this.setState({hrs:t}):"minute"===e?this.setState({mins:t}):"second"===e&&this.setState({secs:t})}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"custom-time-opt ripple-effect",children:[Object(h.jsx)(Q,{id:"custom_time",time:3600*parseInt(this.state.hrs)+60*parseInt(this.state.mins)+parseInt(this.state.secs),unit:"second",updateTimeLim:this.props.updateTimeLim}),Object(h.jsxs)("label",{htmlFor:"custom_time",className:"custom-time-wrapper",children:[Object(h.jsx)("label",{htmlFor:"cust",children:"Enter custom time limit: "}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"time_input",children:[Object(h.jsx)(Z,{minTime:"0",maxTime:"10",unit:"hour",updateInput:this.updateInput}),Object(h.jsx)("span",{className:"time_colon",children:":"}),Object(h.jsx)(Z,{minTime:"0",maxTime:"59",unit:"minute",updateInput:this.updateInput}),Object(h.jsx)("span",{className:"time_colon",children:":"}),Object(h.jsx)(Z,{minTime:"0",maxTime:"59",unit:"second",updateInput:this.updateInput})]})]})]})}}]),i}(a.a.Component);function ee(e){var t=H("timeLimOpt")||-1,i=[[5,"minute"],[10,"minute"],[15,"minute"],[30,"minute"],[45,"minute"],[1,"hour"],[1.5,"hour"],[2,"hour"]].map((function(i,s){var a=i[0]*("minute"===i[1]?60:3600);return Object(h.jsx)(X,{time:i[0],unit:i[1],isDefault:t===a,updateTimeLim:e.updateTimeLim},s)}));return Object(h.jsxs)("div",{className:"setting timeSet",children:[Object(h.jsx)("span",{children:"Choose time limit"}),Object(h.jsx)(V,{updateIsTimeLim:e.updateIsTimeLim}),i,Object(h.jsx)($,{updateTimeLim:e.updateTimeLim})]})}function te(e){var t,i=document.body.classList.contains("light-mode"),s=document.body.classList.contains("dark-mode"),a=document.body.classList.contains("system-mode");i?t="light":s?t="dark":a&&(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");var n="light"===t?"dark":"light";return Object(h.jsx)("button",{className:"btn colorMode ".concat(n,"Mode ripple-effect"),title:"to ".concat(n," mode"),onClick:function(){"light"===n?(e.updateLightMode(),e.updateColorMode("light")):(e.updateDarkMode(),e.updateColorMode("dark"))},tabIndex:"0","aria-label":"switch to ".concat(n," mode")})}function ie(e){var t=e.history;return Object(h.jsx)("button",{className:"btn reverseOne ripple-effect",title:"undo",onClick:function(){t[t.length-1].isPawnPromotion?e.timeTravel(-2):e.timeTravel(-1)},disabled:0===t.length,tabIndex:"0","aria-label":"undo one step"})}function se(){return Object(h.jsx)("button",{className:"btn setSetting ripple-effect",title:"setting",onClick:function(){var e=document.body;e.classList.contains("open-setting")?e.classList.remove("open-setting"):e.classList.add("open-setting")},tabIndex:"0","aria-label":"set settings"})}function ae(){return Object(h.jsx)("button",{className:"btn closeSetting ripple-effect",title:"close",onClick:function(){document.body.classList.remove("open-setting")},tabIndex:"0","aria-label":"close settings"})}var ne=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).updateLightMode=s.updateLightMode.bind(Object(u.a)(s)),s.updateDarkMode=s.updateDarkMode.bind(Object(u.a)(s)),s.updateSystemMode=s.updateSystemMode.bind(Object(u.a)(s)),s.updatePlainStyle=s.updatePlainStyle.bind(Object(u.a)(s)),s.updateFancyStyle=s.updateFancyStyle.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"componentDidMount",value:function(){"plain"===this.props.pieceStyle?this.updatePlainStyle():this.updateFancyStyle();var e=this.props.colorMode;"light"===e?this.updateLightMode():"dark"===e?this.updateDarkMode():this.updateSystemMode()}},{key:"updateLightMode",value:function(){document.body.classList.contains("dark-mode")&&document.body.classList.remove("dark-mode"),document.body.classList.add("light-mode"),this.props.updateColorMode("light")}},{key:"updateDarkMode",value:function(){document.body.classList.contains("light-mode")&&document.body.classList.remove("light-mode"),document.body.classList.add("dark-mode"),this.props.updateColorMode("dark")}},{key:"updateSystemMode",value:function(){document.body.classList.contains("light-mode")?document.body.classList.remove("light-mode"):document.body.classList.contains("dark-mode")&&document.body.classList.remove("dark-mode"),this.props.updateColorMode("system")}},{key:"updatePlainStyle",value:function(){document.body.classList.contains("fancy-style")&&document.body.classList.remove("fancy-style"),document.body.classList.add("plain-style"),this.props.updatePieceStyle("plain")}},{key:"updateFancyStyle",value:function(){document.body.classList.contains("plain-style")&&document.body.classList.remove("plain-style"),document.body.classList.add("fancy-style"),this.props.updatePieceStyle("fancy")}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(te,{updateColorMode:this.props.updateColorMode,updateLightMode:this.updateLightMode,updateDarkMode:this.updateDarkMode}),Object(h.jsx)(ie,{history:this.props.history,timeTravel:this.props.timeTravel}),Object(h.jsx)(se,{}),Object(h.jsxs)("div",{className:"settings",children:[Object(h.jsx)("h1",{children:"SETTINGS"}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Appearance"}),Object(h.jsx)(G,{updateShowPos:this.props.updateShowPos,openPieceCnt:this.props.openPieceCnt})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Color Mode"}),Object(h.jsx)(A,{colorMode:this.props.colorMode,updateLightMode:this.updateLightMode,updateDarkMode:this.updateDarkMode,updateSystemMode:this.updateSystemMode},this.props.colorMode)]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Chess Piece Style"}),Object(h.jsx)(W,{pieceStyle:this.props.pieceStyle,updatePlainStyle:this.updatePlainStyle,updateFancyStyle:this.updateFancyStyle})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"History"}),Object(h.jsx)(K,{history:this.props.history,timeTravel:this.props.timeTravel})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h2",{children:"Time Limit"}),Object(h.jsx)(ee,{updateIsTimeLim:this.props.updateIsTimeLim,updateTimeLim:this.props.updateTimeLim})]}),Object(h.jsx)(ae,{})]})]})}}]),i}(a.a.Component);function oe(){return Object(h.jsx)("div",{className:"modal",onClick:function(){var e=document.body;e.classList.remove("open-setting"),e.classList.remove("open-promo")}})}var ce=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).state={hasError:!1},s}return Object(r.a)(i,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(h.jsxs)("div",{className:"errorBoundary",children:[Object(h.jsx)("div",{className:"errorPic"}),Object(h.jsx)("h1",{children:"Sorry, something went wrong."})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),i}(a.a.Component),re={king:[4],queen:[3],bishop:[2,5],knight:[1,6],rook:[0,7],pawn:[0,1,2,3,4,5,6,7]},pe={},de={},le={king:1,queen:1,bishop:2,knight:2,rook:2,pawn:8},ue={0:{king:1,queen:1,bishop:2,knight:2,rook:2,pawn:8},1:{king:1,queen:1,bishop:2,knight:2,rook:2,pawn:8}},he=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(e){var s;Object(c.a)(this,i),s=t.call(this,e);for(var a=1;a<=2;a++)for(var n=0,o=Object.keys(re);n<o.length;n++){var r=o[n];for(var p in re[r]){var d=void 0;pe[[d="pawn"===r?1===a?1:6:1===a?0:7,re[r][p]]]=r,de[[d,re[r][p]]]=a}}return s.state={showPos:!0,history:H("history")||[],complete:H("complete")||!1,winner:H("winner")||null,turn:H("turn")||2,board:H("board")||pe,sideMap:H("sideMap")||de,pieceCnt:H("pieceCnt")||ue,pawnPromoInfo:{side:null,row:null,col:null},isTimeLim:!!H("whiteTime"),whiteTime:H("whiteTime")||null,blackTime:H("blackTime")||null,colorMode:H("colorMode")||"system",pieceStyle:H("pieceStyle")||"plain"},s.newGame=s.newGame.bind(Object(u.a)(s)),s.completed=s.completed.bind(Object(u.a)(s)),s.updateTurn=s.updateTurn.bind(Object(u.a)(s)),s.updateBoard=s.updateBoard.bind(Object(u.a)(s)),s.updatePieceCnt=s.updatePieceCnt.bind(Object(u.a)(s)),s.addPiece=s.updateAddPiece.bind(Object(u.a)(s)),s.updateShowPos=s.updateShowPos.bind(Object(u.a)(s)),s.updateColorMode=s.updateColorMode.bind(Object(u.a)(s)),s.updatePieceStyle=s.updatePieceStyle.bind(Object(u.a)(s)),s.addHistory=s.addHistory.bind(Object(u.a)(s)),s.timeTravel=s.timeTravel.bind(Object(u.a)(s)),s.setPawnPromotion=s.setPawnPromotion.bind(Object(u.a)(s)),s.pawnPromotion=s.pawnPromotion.bind(Object(u.a)(s)),s.updateIsTimeLim=s.updateIsTimeLim.bind(Object(u.a)(s)),s.updateTimeLim=s.updateTimeLim.bind(Object(u.a)(s)),s.updateTimeLeft=s.updateTimeLeft.bind(Object(u.a)(s)),s}return Object(r.a)(i,[{key:"newGame",value:function(){localStorage.clear(),window.location.reload()}},{key:"completed",value:function(e){e=1===e?"black":"white",this.setState({complete:!0,winner:e}),q("complete",!0),q("winner",e)}},{key:"updateTurn",value:function(){var e=2===this.state.turn?1:2;this.setState({turn:e}),q("turn",e)}},{key:"updateBoard",value:function(e,t,i,s){var a,n=!1;"king"===this.state.board[[i,s]]&&(n=!0,a=this.state.sideMap[[e,t]]);var o=this.state.board;o[[i,s]]=o[[e,t]],o[[e,t]]=null;var c=this.state.sideMap;return c[[i,s]]=c[[e,t]],c[[e,t]]=null,this.setState({board:o,sideMap:c}),q("board",o),q("sideMap",c),n&&this.completed(a),n}},{key:"updatePieceCnt",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e--;var s=this.state.pieceCnt;i?s[e][t]--:s[e][t]++,this.setState({pieceCnt:s}),q("pieceCnt",s)}},{key:"openPieceCnt",value:function(){var e=document.querySelector(".counter");e.classList.contains("open-counter")?(e.classList.remove("open-counter"),document.querySelector("#input2").checked=!1):(e.classList.add("open-counter"),document.querySelector("#input2").checked=!0)}},{key:"updateShowPos",value:function(e){this.setState({showPos:e})}},{key:"updateColorMode",value:function(e){this.setState({colorMode:e}),q("colorMode",e)}},{key:"updatePieceStyle",value:function(e){this.setState({pieceStyle:e}),q("pieceStyle",e)}},{key:"updateAddPiece",value:function(e,t,i,s){var a=this.state.board;a[[i,s]]=e;var n=this.state.sideMap;n[[i,s]]=t,this.setState({board:a,sideMap:n}),q("board",a),q("sideMap",n)}},{key:"updateAlterPiece",value:function(e,t,i){var s=this.state.board;s[[t,i]]=e,this.setState({board:s}),q("board",s)}},{key:"addHistory",value:function(e){var t=this.state.history;t.push(e),this.setState({history:t}),q("history",t)}},{key:"timeTravel",value:function(e){var t=this.state.history.length,i=0;if(0!==t&&(e<0&&(e=t+e),!(e<0))){for(var s=t-1;s>=e;s--){var a=this.state.history[s];if(a.isPawnPromotion)this.updateAlterPiece(a.oldPieceName,a.row,a.col),this.updatePieceCnt(a.side,a.oldPieceName,!1),this.updatePieceCnt(a.side,a.newPieceName),i++;else{var n=a.pieceOldRow,o=a.pieceOldCol,c=a.pieceNewRow,r=a.pieceNewCol;this.updateBoard(c,r,n,o);var p=a.takeOverName,d=a.takeOverSide,l=a.takeOverRow,u=a.takeOverCol;p&&(this.updateAddPiece(p,d,l,u),this.updatePieceCnt(d,p,!1))}}var h=this.state.history;h=h.slice(0,e),this.setState({history:h}),q("history",h),1===(t-i-e)%2&&this.updateTurn()}}},{key:"setPawnPromotion",value:function(e,t,i){this.setState({pawnPromoInfo:{side:e,row:t,col:i}})}},{key:"pawnPromotion",value:function(e){document.body.classList.remove("open-promo");var t=this.state.pawnPromoInfo.side,i=this.state.pawnPromoInfo.row,s=this.state.pawnPromoInfo.col,a=this.state.history;a.push({isPawnPromotion:!0,oldPieceName:this.state.board[[i,s]],newPieceName:e,side:t,row:i,col:s}),this.updatePieceCnt(t,this.state.board[[i,s]]),this.updatePieceCnt(t,e,!1),this.setState({history:a});var n=this.state.board;n[[i,s]]=e,this.setState({board:n}),q("history",a),q("board",n)}},{key:"updateIsTimeLim",value:function(e){this.newGame(),this.setState({isTimeLim:e})}},{key:"updateTimeLim",value:function(e){this.updateIsTimeLim(!0),this.setState({blackTime:e,whiteTime:e}),q("blackTime",e),q("whiteTime",e),q("timeLimOpt",e),window.location.reload()}},{key:"updateTimeLeft",value:function(e,t){1===e?(this.setState({blackTime:t}),q("blackTime",t)):(this.setState({whiteTime:t}),q("whiteTime",t))}},{key:"render",value:function(){return Object(h.jsxs)(ce,{children:[Object(h.jsx)(_,Object(l.a)(Object(l.a)({},this.state),{},{initPieceCnt:le,newGame:this.newGame,completed:this.completed,updateTurn:this.updateTurn,updateBoard:this.updateBoard,updatePieceCnt:this.updatePieceCnt,openPieceCnt:this.openPieceCnt,addHistory:this.addHistory,setPawnPromotion:this.setPawnPromotion,pawnPromotion:this.pawnPromotion,updateIsTimeLim:this.updateIsTimeLim,updateTimeLeft:this.updateTimeLeft})),Object(h.jsx)(ne,Object(l.a)(Object(l.a)({},this.state),{},{openPieceCnt:this.openPieceCnt,updateShowPos:this.updateShowPos,updateColorMode:this.updateColorMode,updatePieceStyle:this.updatePieceStyle,history:this.state.history,timeTravel:this.timeTravel,updateTimeLim:this.updateTimeLim,updateIsTimeLim:this.updateIsTimeLim})),Object(h.jsx)(oe,{})]})}}]),i}(a.a.Component),be=function(e){Object(p.a)(i,e);var t=Object(d.a)(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(he,{})})}}]),i}(a.a.Component),me=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,24)).then((function(t){var i=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,o=t.getTTFB;i(e),s(e),a(e),n(e),o(e)}))};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(be,{})}),document.getElementById("root")),me()}],[[23,1,2]]]);
//# sourceMappingURL=main.f3c245a5.chunk.js.map